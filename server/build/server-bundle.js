(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=require("express");var n=e.n(t);const r=require("react");var a=e.n(r);const o=require("react-dom/server");var c=e.n(o);const s=require("react-router-dom/server"),i=require("redux");require("axios");var l="SET_MAPS",d="SET_MAP",u="DELETED_MAP",p="UPDATED_MAP",m="CREATED_MAP",E="IS_EMPTY_MAP";const h=require("lodash");var S=e.n(h),v={mapList:[],selectedMap:null,emptyMap:!1};const M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;console.log("entered mapReducer");var n,r=S().cloneDeep(e.mapList);switch(t.type){case l:return{mapList:t.maps,selectedMap:e.selectedMap,emptyMap:e.emptyMap};case d:return{mapList:e.mapList,selectedMap:t.selectedMap,emptyMap:e.emptyMap};case m:return r.unshift(t.createdMap),{mapList:r,selectedMap:t.createdMap,emptyMap:!0};case p:var a=r.find((function(e){return e.MapID===t.updatedMap.MapID}));return n=r.indexOf(a),r[n]=t.updatedMap,{mapList:r,selectedMap:t.updatedMap};case u:var o=r.find((function(e){return e.MapID===t.deletedMap.MapID}));return n=r.indexOf(o),r.splice(n,1),{mapList:r,selectedMap:null};case E:return{mapList:e.mapList,selectedMap:e.selectedMap,emptyMap:t.isEmpty};default:return e}};require("moment");var g="SET_PHOTOS",L="SET_PHOTO",f="PHOTO_UPLOADED",T="SET_SITES",O="SET_SITE",y="UPDATED_SITE",_="SITE_CREATED",P="DELETED_SITE";console.log("env is local:",process.env.EXPO_LOCAL);console.log("baseURL","http://138.68.12.0:8080");var D={siteList:[],selectedSite:null};const I=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,n=arguments.length>1?arguments[1]:void 0,r=S().cloneDeep(t.siteList);switch(n.type){case T:return{siteList:n.sites,seletedSite:t.selectedSite};case O:return{siteList:t.siteList,selectedSite:n.selectedSite};case _:return r.push(n.createdSite),{siteList:r,selectedSite:n.createdSite};case y:var a=r.find((function(e){return e.SiteID===n.updatedSite.SiteID}));return e=r.indexOf(a),r[e]=n.updatedSite,{siteList:r,selectedSite:n.updatedSite};case P:return e=r.indexOf(n.deletedSite),r.splice(e,1),{siteList:r,selectedSite:null};default:return t}};var b="SET_AUTHENTICATED",A="SET_READ_ONLY",R="LOGIN_SUCCESS",q="LOG_OUT",N={authenticatedMember:null,readOnly:!1,justLoggedIn:!1};const j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return{authenticatedMember:t.member,readOnly:e.readOnly,justLoggedIn:e.loggedIn};case A:return{authenticatedMember:e.authenticatedMember,readOnly:t.value,justLoggedIn:e.loggedIn};case R:return{authenticatedMember:e.authenticatedMember,readOnly:e.readOnly,justLoggedIn:!0};case q:return{authenticatedMember:e.authenticatedMember,readOnly:e.readOnly,justLoggedIn:!1};default:return e}};var w={photoList:[],selectedPhoto:null,uploadState:null,needsReload:!1};const x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return{photoList:t.photos,selectedPhoto:e.selectedPhoto};case L:return{photoList:e.photoList,selectedPhoto:t.selectedPhoto};case f:return{photoList:e.photoList,selectedPhoto:t.selectedPhoto,uploadState:"uploaded"};default:return e}},C=(0,require("@reduxjs/toolkit").configureStore)({reducer:function(){return(0,i.combineReducers)({map:M,site:I,auth:j,album:x})}}),H=require("react-router-dom"),U=require("react-helmet");var G=e.n(U);const k=function(){return a().createElement("div",null,a().createElement(G(),null,a().createElement("title",null,"home component"),a().createElement("meta",{name:"description",content:"child component overwritting"}),a().createElement("meta",{name:"theme-color",content:"#008f68"})),a().createElement("div",null,"Welcome to the sucky home component"),a().createElement("button",{onClick:function(){return console.log("hi shorty")}},"press me "))},Y=function(){return a().createElement(a().Fragment,null,a().createElement(U.Helmet,null,a().createElement("title",null,"App Title"),a().createElement("meta",{name:"description",content:"not dynamic who cares"}),a().createElement("meta",{name:"theme-color",content:"#008f68"})),a().createElement(H.Routes,null,a().createElement(H.Route,{path:"/",element:a().createElement(k,null)})))},F=require("react-redux");console.log("frontend server bootstrap start");var J=n()();J.use(n().static("app/dist")),J.get("*",(function(e,t){var n=function(e){var t=U.Helmet.renderStatic(),n=c().renderToString(a().createElement(F.Provider,{store:C},a().createElement(s.StaticRouter,{location:e.url},a().createElement(Y,null))));return"\n\t\t\t\t<!DOCTYPE html>\n                <html>\n\t\t\t\t\t<head>\n\t\t\t\t\t\t\n\t\t\t\t\t\t  \t".concat(t.title.toString(),"\n        \t\t\t\t\t").concat(t.meta.toString(),'\n\t\t\t\t\t</head>\n\t\t\t\t\t<body>\n\t\t\t\t\t\t<div id="app">\n\t\t\t\t\t\t\t').concat(n,'\n\t\t\t\t\t\t</div>\n \t\t\t\t\t\t<script src="app-bundle.js"><\/script>\n\t\t\t\t\t\t<script>\n          // WARNING: See the following for security issues around embedding JSON in HTML:\n          // https://redux.js.org/usage/server-rendering#security-considerations\n          window.__PRELOADED_STATE__ = ').concat(JSON.stringify({}).replace(/</g,"\\u003c"),"\n        <\/script>\n                \t</body>\n\t\t\t\t</html>\n        ")}(e);t.send(n)})),J.listen(3e3,(function(){console.log("FRONTEND SERVER LISTENING ON PORT 3000")}))})();